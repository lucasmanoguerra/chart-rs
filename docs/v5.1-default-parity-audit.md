# Lightweight Charts v5.1 Default/Boundary Parity Audit

Date: 2026-02-13

This document tracks default-option parity and section-boundary behavior against TradingView Lightweight Charts v5.1 using official docs references.

## Source references

- https://tradingview.github.io/lightweight-charts/docs/api/interfaces/PriceScaleOptions
- https://tradingview.github.io/lightweight-charts/docs/api/interfaces/TimeScaleOptions
- https://tradingview.github.io/lightweight-charts/docs/api/interfaces/HandleScrollOptions
- https://tradingview.github.io/lightweight-charts/docs/api/interfaces/HandleScaleOptions
- https://tradingview.github.io/lightweight-charts/docs/api/interfaces/CrosshairOptions
- https://tradingview.github.io/lightweight-charts/docs/api/interfaces/CrosshairLineOptions

## Defaults parity matrix

| Area | v5.1 default | chart-rs status | Notes |
|---|---|---|---|
| `crosshair.mode` | `Magnet` | `done` | `ChartEngineConfig` default remains `CrosshairMode::Magnet`. |
| `layout.textColor` | `#191919` | `done` | `RenderStyle` defaults for axis/time labels now use `#191919` equivalent baseline. |
| `layout.fontSize` | `12` | `done` | Default axis/crosshair/last-price label font sizes now align to `12px` baseline. |
| `grid.vertLines/horzLines.color` | `#D6DCDE` | `done` | `RenderStyle` default grid colors updated to `#D6DCDE` equivalent baseline. |
| Time-axis default label policy (timestamp inputs) | adaptive datetime | `done` | `TimeAxisLabelPolicy::default()` now resolves to `UtcAdaptive` for date/time-like defaults closer to Lightweight behavior. |
| Crosshair line visibility | `true` (horz/vert) | `done` | Shared + per-axis gates default enabled. |
| Crosshair line width | `1` | `done` | `RenderStyle::default().crosshair_line_width = 1.0`. |
| Crosshair line style | `LargeDashed` | `done` | Added `LineStrokeStyle::LargeDashed` and made it default for crosshair line style. |
| Crosshair line color | `#758696` | `done` | Default updated to equivalent normalized RGB. |
| Crosshair label background | `#4c525e` | `done` | Default crosshair label box fill/text updated to dark background + white text baseline. |
| `priceScale.mode` | `Normal` | `done` | Mapped to `PriceScaleMode::Linear` baseline. |
| `priceScale.invertScale` | `false` | `done` | Default remains non-inverted. |
| `priceScale.scaleMargins.top` | `0.2` | `done` | Updated `PriceScaleMarginBehavior::default`. |
| `priceScale.scaleMargins.bottom` | `0.1` | `done` | Updated `PriceScaleMarginBehavior::default`. |
| `priceScale.autoScale` | `true` | `done` | `PriceScaleRealtimeBehavior::default()` now enables autoscale on `set_*` and realtime update flows. |
| `priceScale.ticksVisible` | `false` | `done` | Default price-axis tick marks now hidden. |
| `timeScale.rightOffset` | `0` | `done` | Baseline offset remains zero. |
| `timeScale.minBarSpacing` | `0.5` | `done` | Already aligned. |
| `timeScale.fixLeftEdge/fixRightEdge` | `false/false` | `done` | Already aligned. |
| `timeScale.rightBarStaysOnScroll` | `false` | `done` | Already aligned. |
| `timeScale.lockVisibleTimeRangeOnResize` | `false` | `done` | `TimeScaleResizeBehavior::default().lock_visible_range_on_resize` now matches v5.1 (`false`). |
| `timeScale.barSpacing` | `6` | `done` | `TimeScaleNavigationBehavior::default().bar_spacing_px` now defaults to `Some(6.0)`. |
| `handleScroll` (`mouseWheel`, `pressedMouseMove`, `horzTouchDrag`, `vertTouchDrag`) | `true` | `done` | Already aligned. |
| `handleScale.mouseWheel` / `handleScale.pinch` | `true` / `true` | `done` | Already aligned. |
| `handleScale.axisPressedMouseMove` / `axisDoubleClickReset` | `true` / `true` | `done` | Implemented as active gated paths via `axis_drag_scale_price`, `axis_drag_scale_time`, `axis_double_click_reset_price_scale`, and `axis_double_click_reset_time_scale`, controlled by `scale_axis_pressed_mouse_move` / `scale_axis_double_click_reset` (default `true`). |

## Section boundary parity

Status: `done`

Implemented layout hardening to avoid section overlap:

- Effective axis layout now clamps oversized configured axis dimensions, preserving a minimum non-negative plot section (`min plot width=80px`, `min plot height=56px`).
- Price-axis labels are vertically clamped to plot bounds.
- Last-price label and last-price label box are vertically clamped to plot bounds.
- Crosshair price-axis label box is vertically clamped to plot bounds.
- Crosshair time-axis label box is vertically clamped to time-axis bounds.

Test evidence:

- `tests/render_axis_layout_tests.rs`
- `tests/render_frame_tests.rs`

## Axis-section visual-fixture corpus parity

Status: `done`

Implemented deterministic manifest-driven fixtures to monitor axis-section sizing drift:

- Fixture corpus and expected signatures are stored in `tests/fixtures/axis_section_sizing/axis_section_sizing_corpus.json`.
- Regression validation runs in `tests/visual_fixture_axis_section_sizing_tests.rs`.
- The corpus currently covers:
  - balanced/default section sizing baseline,
  - price-axis typography/label pressure scenario,
  - time-axis typography/tick pressure scenario.

## Axis-section PNG reference export parity

Status: `done`

Implemented manifest-driven PNG export for fixture review:

- Generator tool: `src/bin/generate_axis_section_fixture_pngs.rs`
- Artifact references declared per fixture in:
  - `tests/fixtures/axis_section_sizing/axis_section_sizing_corpus.json`
- Generated PNG references stored in:
  - `tests/fixtures/axis_section_sizing/reference_png/`
- Artifact path coverage validated by:
  - `tests/visual_fixture_axis_section_png_artifacts_tests.rs`

## Axis-section extreme/sparse coverage parity

Status: `done`

Expanded fixture coverage for adaptive axis sizing drift:

- tiny viewport clamp stress:
  - `tiny-viewport-extreme`
- narrow domain with high precision labels:
  - `narrow-domain-high-precision`
- sparse series across wide time range:
  - `sparse-series-wide-range`

Coverage artifacts:

- signatures + manifests:
  - `tests/fixtures/axis_section_sizing/axis_section_sizing_corpus.json`
- PNG references:
  - `tests/fixtures/axis_section_sizing/reference_png/*.png`

## Axis-section display-mode and extreme-magnitude coverage parity

Status: `done`

Expanded fixture coverage for mixed display transforms and very large magnitudes:

- extreme positive/negative magnitude in normal mode:
  - `extreme-magnitude-normal`
- percentage display transform:
  - `extreme-magnitude-percentage`
- indexed-to-100 display transform:
  - `extreme-magnitude-indexed-to-100`

## Axis-section locale/timezone/session coverage parity

Status: `done`

Expanded fixture coverage for locale-aware label formatting and session/timezone tick behavior:

- EnUs + UTC + session boundaries:
  - `locale-enus-utc-session`
- EsEs + fixed offset + session boundaries:
  - `locale-eses-fixed-offset-session`
- EsEs + UTC adaptive policy without session:
  - `locale-eses-utc-adaptive-no-session`

Also extended sizing-signature assertions with optional locale-sensitive sentinels:

- `leftmost_time_label_text`
- `top_price_label_text`
- `major_time_tick_mark_count`

## Axis-section day-rollover and offset-extreme coverage parity

Status: `done`

Expanded fixture coverage for day-rollover behavior under extreme timezone offsets with wrap-around sessions:

- EnUs + `UTC+14` + wrap-around session (`23:30` -> `00:30`):
  - `locale-enus-utcplus14-rollover-session-wrap`
- EsEs + `UTC-12` + wrap-around session (`22:00` -> `01:00`):
  - `locale-eses-utcminus12-rollover-session-wrap`

Coverage validates local-date flip and major-tick stability through optional sentinels:

- `leftmost_time_label_text`
- `top_price_label_text`
- `major_time_tick_mark_count`

## Axis-section second-level sub-minute coverage parity

Status: `done`

Expanded fixture coverage for second-level formatting in high-zoom spans (`show_seconds=true`):

- EnUs + UTC, sub-minute span without session:
  - `seconds-enus-utc-subminute-no-session`
- EsEs + fixed offset, sub-minute span with session boundaries:
  - `seconds-eses-fixed-offset-subminute-session`

Coverage validates second-level date/time label transforms and major-tick stability via:

- `leftmost_time_label_text`
- `top_price_label_text`
- `major_time_tick_mark_count`

## Axis-section `UtcAdaptive` transition-boundary coverage parity

Status: `done`

Expanded fixture coverage around `UtcAdaptive` pattern-switch thresholds:

- around `600s` cutover (`DateSecond` -> `DateMinute`):
  - `adaptive-enus-span-599s-utc`
  - `adaptive-enus-span-601s-utc`
- around `172800s` cutover (`DateMinute` -> `Date`):
  - `adaptive-eses-span-172799s-utc`
  - `adaptive-eses-span-172801s-utc`

Coverage validates deterministic threshold behavior via:

- `leftmost_time_label_text`
- `top_price_label_text`
- `major_time_tick_mark_count`

## Axis-section `LogicalDecimal` high-precision coverage parity

Status: `done`

Expanded fixture coverage for non-timestamp logical-time formatting with high precision:

- EnUs + `LogicalDecimal(precision=10)`:
  - `logicaldecimal-enus-precision10`
- EsEs + `LogicalDecimal(precision=10)`:
  - `logicaldecimal-eses-precision10`

Coverage validates locale-dependent decimal separators and stability via:

- `leftmost_time_label_text`
- `top_price_label_text`
- `major_time_tick_mark_count`

## Axis-section `MinMove` trailing-zero trim coverage parity

Status: `done`

Expanded fixture coverage for price-axis `MinMove` policy with trim toggles across locales:

- EnUs + `trim_trailing_zeros=false/true`:
  - `minmove-enus-trim-false`
  - `minmove-enus-trim-true`
- EsEs + `trim_trailing_zeros=false/true`:
  - `minmove-eses-trim-false`
  - `minmove-eses-trim-true`

Coverage locks deterministic rounding/formatting outputs:

- EnUs: `2.00` vs `2`
- EsEs: `2,00` vs `2`

## Axis-section display-mode base fallback (`base_price=None`) coverage parity

Status: `done`

Expanded fixture coverage for display-mode base fallback when `base_price` is omitted:

- `Percentage` + `base_price=None`:
  - `displaymode-percentage-base-none-fallback-one`
- `IndexedTo100` + `base_price=None`:
  - `displaymode-indexed-base-none-fallback-one`

Coverage locks deterministic fallback-to-1 behavior when resolved base is zero,
via locale/text/tick sentinels:

- `leftmost_time_label_text`
- `top_price_label_text`
- `major_time_tick_mark_count`

## Axis-section display-mode explicit invalid-base fallback coverage parity

Status: `done`

Expanded fixture coverage for explicit invalid display bases that must resolve to fallback `1`:

- `Percentage` + explicit invalid `base_price`:
  - `displaymode-percentage-base-zero-fallback-one`
  - `displaymode-percentage-base-nan-fallback-one`
  - `displaymode-percentage-base-posinf-fallback-one`
  - `displaymode-percentage-base-neginf-fallback-one`
- `IndexedTo100` + explicit invalid `base_price`:
  - `displaymode-indexed-base-zero-fallback-one`
  - `displaymode-indexed-base-nan-fallback-one`
  - `displaymode-indexed-base-posinf-fallback-one`
  - `displaymode-indexed-base-neginf-fallback-one`

Coverage keeps deterministic fallback-to-1 behavior locked for both transforms,
using the same locale/text/tick sentinels:

- `leftmost_time_label_text`
- `top_price_label_text`
- `major_time_tick_mark_count`

## Display-mode invalid-base fallback property robustness

Status: `done`

Added property-level robustness checks for explicit invalid `base_price` values:

- `tests/property_price_axis_display_mode_fallback_tests.rs`
  - `percentage_invalid_explicit_bases_match_base_one_fallback`
  - `indexed_invalid_explicit_bases_match_base_one_fallback`

Property strategy:

- generated 4-point datasets over bounded price ranges
- locale toggle (`EnUs`/`EsEs`)
- explicit invalid bases (`0`, `NaN`, `+inf`, `-inf`)
- invariant: rendered right-axis labels are identical to explicit `base_price=1`

## Display-mode `base_price=None` fallback property robustness

Status: `done`

Added property-level robustness checks for omitted display base:

- `tests/property_price_axis_display_mode_none_fallback_tests.rs`
  - `percentage_none_base_matches_explicit_resolved_non_zero_base`
  - `indexed_none_base_matches_explicit_resolved_non_zero_base`
  - `percentage_none_base_with_zero_resolved_base_matches_explicit_one`
  - `indexed_none_base_with_zero_resolved_base_matches_explicit_one`

Property strategy:

- generated 4-point datasets over bounded price ranges
- locale toggle (`EnUs`/`EsEs`)
- `base_price=None` equivalence contracts:
  - resolved base finite/non-zero => labels match explicit `base_price=resolved_base`
  - resolved base zero => labels match explicit `base_price=1`

## Display-mode domain fallback robustness without data

Status: `done`

Added property checks for `base_price=None` when the engine has no point/candle data
and base resolution falls back to `price_domain`:

- `tests/property_price_axis_display_mode_domain_fallback_tests.rs`
  - `percentage_none_base_without_data_matches_explicit_domain_min_when_non_zero`
  - `indexed_none_base_without_data_matches_explicit_domain_min_when_non_zero`
  - `percentage_none_base_without_data_zero_domain_min_matches_explicit_one`
  - `indexed_none_base_without_data_zero_domain_min_matches_explicit_one`

Property strategy:

- generated positive domain spans
- locale toggle (`EnUs`/`EsEs`)
- no data loaded (domain fallback path only)
- invariants:
  - `domain_min != 0` => `None` labels match explicit `base_price=domain_min`
  - `domain_min == 0` => `None` labels match explicit `base_price=1`

## Display-mode fallback formatter/cache benchmark coverage

Status: `done`

Added criterion coverage for display-mode fallback formatting and cache behavior
under mixed fallback routes:

- `benches/core_math_bench.rs`
  - `price_axis_display_mode_fallback_cache_hot_mixed`
  - `price_axis_display_mode_fallback_cache_cold_mixed`
- `scripts/check_fallback_bench_regressions.py`
- `.github/workflows/bench.yml`
- `.github/workflows/ci.yml`

Benchmark strategy:

- mixed fallback route set in one loop:
  - explicit invalid base (`base_price=NaN`) for `Percentage`
  - `base_price=None` with zero-resolved base from data for `Percentage`
  - `base_price=None` with zero-resolved base from domain (no data) for `IndexedTo100`
- separate hot/cold cache variants:
  - hot: pre-warmed price-label cache, repeated render-frame builds
  - cold: cache cleared each iteration before render-frame build
- CI guardrails:
  - focused PR benchmark run for fallback benches only
  - scheduled full benchmark run with fallback guard validation
  - guard conditions:
    - maximum hot/cold ratio budget
    - maximum hot mean latency budget
    - maximum cold mean latency budget

## Display-mode fallback suffix/locale separator property coherence

Status: `done`

Added property-level coherence checks ensuring fallback paths keep suffix and
locale separator contracts stable:

- `tests/property_price_axis_display_mode_locale_suffix_fallback_tests.rs`
  - `percentage_fallback_routes_keep_percent_suffix_and_locale_separator`
  - `indexed_fallback_routes_keep_non_percent_suffix_and_locale_separator`

Property strategy:

- locale toggle (`EnUs`/`EsEs`)
- mode toggle (`Percentage`/`IndexedTo100`)
- fallback route matrix:
  - explicit invalid base (`NaN`)
  - `base_price=None` with resolved base `0` from data
  - `base_price=None` with resolved base non-zero from data
  - `base_price=None` with zero domain fallback without data
  - `base_price=None` with non-zero domain fallback without data
- invariants:
  - `%` suffix only in `Percentage`
  - no `%` suffix in `IndexedTo100`
  - decimal separator is `.` in `EnUs` and `,` in `EsEs`

## Display-mode fallback cache stats API behavior

Status: `done`

Added API-level tests validating `price_label_cache_stats` under mixed fallback
scenarios:

- `tests/price_axis_formatter_tests.rs`
  - `price_label_cache_stats_report_hot_hits_for_mixed_fallback_routes`
  - `price_label_cache_stats_cold_rebuild_penalty_exceeds_hot_second_pass_miss_delta`

Validation strategy:

- mixed fallback routes:
  - explicit invalid `base_price` (`NaN`) in `Percentage`
  - `base_price=None` resolved from zero-valued first data sample
  - `base_price=None` resolved from zero domain without data (`IndexedTo100`)
- invariants:
  - cache-hot second frame increases hit count
  - cache-cold rebuild path incurs larger second-pass miss delta than cache-hot

## Axis label collision/even-spacing robustness under zoom and scale drag

Status: `done`

Added axis-layout robustness coverage to lock non-collision and spacing quality
when zoom/pan/scale interactions shift axis label placement:

- `tests/render_axis_layout_tests.rs`
  - `time_axis_labels_stay_collision_safe_under_zoom_and_pan`
  - `time_axis_label_spacing_remains_reasonably_even_after_zoom_changes`
  - `price_axis_labels_stay_collision_safe_after_vertical_axis_drag_scaling`

Validation strategy:

- time axis:
  - zoom-out and zoom-in+pan ranges keep minimum collision spacing (`>=56px`)
  - zoomed label spacing remains approximately even (bounded max/min delta ratio)
- price axis:
  - repeated `axis_drag_scale_price` interactions preserve minimum collision spacing (`>=22px`)

## Zoom-adaptive axis density baseline

Status: `done`

Implemented zoom-driven tick-density scaling for both axes while preserving
deterministic minimum-spacing guards:

- implementation:
  - `src/api/axis_ticks.rs`
  - `src/api/render_frame_builder.rs`
- tests:
  - `tests/render_axis_layout_tests.rs`
    - `time_axis_tick_density_changes_with_zoom_level`
    - `price_axis_tick_density_changes_with_vertical_scale_zoom`

Behavior contract:

- density scale is derived from axis zoom ratio (time visible/full span and
  price domain/series span)
- target tick spacing remains clamped by axis min-spacing safeguards
- rendered time labels apply post-anchor collision filtering to keep min
  spacing deterministic after edge clamping

## Axis-density extreme zoom fixture coverage

Status: `done`

Extended visual fixtures with explicit visible-range overrides to lock zoom
extreme cadence behavior:

- `tests/fixtures/axis_section_sizing/axis_section_sizing_corpus.json`
  - `zoom-extreme-axis-density-time-out`
  - `zoom-extreme-axis-density-time-in`
- `tests/visual_fixture_axis_section_sizing_tests.rs`
- `src/bin/generate_axis_section_fixture_pngs.rs`

Coverage contract:

- zoom-out fixture keeps sparse cadence and collision-safe labels
- zoom-in fixture increases time-axis label cadence while preserving min spacing
- signatures and PNG artifacts track cadence drift across future changes

## Lightweight v5.1 directed axis cadence comparisons

Status: `done`

Added directed parity checks against Lightweight Charts v5.1 cadence behavior:

- tests:
  - `tests/lightweight_axis_tick_cadence_reference_tests.rs`
- reference note:
  - `docs/lightweight-v5.1-axis-cadence-reference.md`

Comparison contract:

- time-axis cadence is monotonic with zoom (`zoom-out <= mid <= zoom-in`)
- price-axis cadence responds monotonically to vertical axis-scale zoom
- reference context links official Lightweight Charts repository and local UI
  baseline capture

## Axis-density benchmark CI guardrails

Status: `done`

Added focused criterion coverage and CI guardrails for zoom-adaptive axis-density
render cost drift:

- benches:
  - `benches/core_math_bench.rs`
    - `axis_density_zoom_adaptive_out_render`
    - `axis_density_zoom_adaptive_in_render`
- guard script:
  - `scripts/check_axis_density_bench_regressions.py`
- CI wiring:
  - `.github/workflows/ci.yml`
    - focused PR benchmark job: `perf_axis_density_guard`
  - `.github/workflows/bench.yml`
    - scheduled full-benchmark guard validation

Guard contract:

- validates zoom-in/out mean ratio budget
- validates absolute latency budgets for both zoom-out and zoom-in paths
- fails CI when axis-density render-cost drift exceeds configured thresholds

## Zoom-adaptive axis-density intermediate-range calibration

Status: `done`

Calibrated zoom-driven density mapping for time/price axes to keep intermediate
zoom levels responsive while preserving deterministic min-spacing guarantees:

- implementation:
  - `src/api/axis_ticks.rs`
    - `density_scale_from_zoom_ratio`
  - `src/api/render_frame_builder.rs`
    - calibrated time/price density curve parameters
- tests:
  - `tests/render_axis_layout_tests.rs`
    - `time_axis_tick_density_changes_with_zoom_level`
    - `price_axis_tick_density_changes_with_vertical_scale_zoom`
  - `tests/lightweight_axis_tick_cadence_reference_tests.rs`
    - directed cadence progression checks for time/price axes

Calibration contract:

- neutral zoom band keeps baseline cadence stable near ratio `1`
- non-linear zoom curve increases cadence responsiveness away from neutral band
- time-axis progression remains `out < mid <= in` with explicit minimum gain
- price-axis progression remains strictly increasing under vertical zoom-in
- min-spacing collision filters remain active (`AXIS_*_MIN_SPACING_PX`)

## Axis-density extreme zoom fixture coverage for price axis

Status: `done`

Extended visual-fixture coverage with dedicated price-axis cadence extremes:

- `tests/fixtures/axis_section_sizing/axis_section_sizing_corpus.json`
  - `zoom-extreme-axis-density-price-out`
  - `zoom-extreme-axis-density-price-in`
- `tests/fixtures/axis_section_sizing/reference_png/*.png`
  - `zoom-extreme-axis-density-price-out.png`
  - `zoom-extreme-axis-density-price-in.png`
- fixture harness/tooling:
  - `tests/visual_fixture_axis_section_sizing_tests.rs`
  - `src/bin/generate_axis_section_fixture_pngs.rs`

Fixture control contract:

- `disable_autoscale_on_data_set=true` keeps configured `price_domain` stable
  after `set_data`, avoiding autoscale reset during cadence stress checks
- optional `price_axis_scale_steps` supports deterministic replay of
  `axis_drag_scale_price` sequences when fixture scenarios require interaction
  style setup

## Vertical touch-pan validation and normalization hardening

Status: `done`

Hardened touch pan input validation and vertical normalization semantics:

- implementation:
  - `src/api/time_scale_controller.rs`
- tests:
  - `tests/interaction_touch_pan_tests.rs`
    - `vertical_touch_drag_path_can_drive_pan_when_horizontal_is_disabled`
    - `vertical_touch_pan_ignores_horizontal_nan_when_horizontal_path_is_disabled`
    - `horizontal_touch_pan_ignores_vertical_nan_when_vertical_path_is_disabled`
    - `touch_pan_rejects_non_finite_vertical_delta_when_vertical_path_is_enabled`

Behavior contract:

- axis-specific validation:
  - validate horizontal delta only when horizontal touch pan is enabled
  - validate vertical delta only when vertical touch pan is enabled
- dominant-axis normalization:
  - horizontal-driven pan uses viewport width
  - vertical-driven pan uses viewport height

## Manual `reference_UI` visual baseline process

Status: `done`

Formalized a manual visual baseline and PR checklist workflow for
render/layout changes:

- baseline capture:
  - `reference_UI/Captura desde 2026-02-12 20-28-20.png`
- process docs:
  - `docs/axis-section-visual-fixtures.md`
- PR template gate:
  - `.github/PULL_REQUEST_TEMPLATE.md`
- standardized typed checklists:
  - `layout` changes (section geometry/clipping)
  - `render` changes (primitive/style visibility behavior)
  - `formatter` changes (locale/suffix/fallback text behavior)

## Lightweight v5.1 directed axis cadence expansion

Status: `done`

Expanded directed parity checks to cover additional cadence windows between
extreme zoom states for both axes:

- tests:
  - `tests/lightweight_axis_tick_cadence_reference_tests.rs`
    - `lightweight_v51_reference_time_axis_tick_cadence_tracks_intermediate_zoom_windows`
    - `lightweight_v51_reference_price_axis_tick_cadence_tracks_multi_step_scale_zoom`
- supporting layout guard:
  - `tests/render_axis_layout_tests.rs`
    - `major_time_labels_are_retained_and_collision_safe_under_mixed_zoom_density`

Comparison contract:

- time axis progression envelope:
  - `zoom_out < mid_1 <= mid_2 <= zoom_in_1 <= zoom_in_2`
- price axis progression envelope:
  - `zoom_out_2 <= zoom_out_1 < baseline < zoom_in_1 <= zoom_in_2`
- explicit minimum cadence gain remains enforced for deep zoom-in states.

## Price-axis vertical pan interaction hardening

Status: `done`

Added dedicated price-axis vertical panning with anchor-preserving behavior and
runtime validation:

- implementation:
  - `src/api/price_scale_interaction_controller.rs`
    - `axis_drag_pan_price(drag_delta_y_px, anchor_y_px)`
- tests:
  - `tests/interaction_axis_scale_behavior_tests.rs`
    - `axis_drag_pan_price_preserves_anchor_projection_and_span_when_enabled`
    - `axis_drag_pan_price_is_stable_under_repeated_drags`
    - `axis_drag_pan_price_rejects_invalid_input_when_enabled`
    - gate no-op assertions in disable-path tests

Behavior contract:

- preserves scale span while translating price domain vertically around anchor
- enforces finite-input validation and mode-safe domain transforms
- respects `InteractionInputBehavior::scale_axis_pressed_mouse_move` gating
  with deterministic no-op when disabled.

## Major/minor time-label collision-priority hardening

Status: `done`

Hardened time-axis collision filtering so major labels are retained
deterministically when colliding with nearby minor labels:

- implementation:
  - `src/api/axis_ticks.rs`
    - `select_positions_with_min_spacing_prioritized`
  - `src/api/render_frame_builder.rs`
    - major-aware time-label candidate selection in frame assembly
- tests:
  - `tests/render_axis_layout_tests.rs`
    - `major_time_labels_are_retained_and_collision_safe_under_mixed_zoom_density`
  - `src/api/axis_ticks.rs` unit tests for prioritized selector behavior
- fixture evidence:
  - `tests/fixtures/axis_section_sizing/axis_section_sizing_corpus.json`
    - updated `time-axis-pressure` signature
  - `tests/fixtures/axis_section_sizing/reference_png/time-axis-pressure.png`

Behavior contract:

- min-spacing collision guarantees remain unchanged
- major labels can replace colliding minor labels when spacing allows
- edge-gap trimming does not drop boundary labels when they are major.

## Next parity targets

- No open follow-up items in this default/boundary audit block as of 2026-02-13; continue with the next parity target selected from `docs/parity-v5.1-checklist.md`.
