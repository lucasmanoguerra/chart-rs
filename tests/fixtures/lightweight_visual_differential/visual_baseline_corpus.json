{
  "schema_version": 1,
  "fixtures": [
    {
      "id": "lwc-style-line-basic",
      "description": "Baseline line render with magnet crosshair and constrained time window",
      "input": {
        "viewport": { "width": 800, "height": 400 },
        "time_range": [0.0, 100.0],
        "price_range": [0.0, 100.0],
        "points": [
          { "x": 0.0, "y": 15.0 },
          { "x": 10.0, "y": 18.0 },
          { "x": 20.0, "y": 22.0 },
          { "x": 30.0, "y": 28.0 },
          { "x": 40.0, "y": 35.0 },
          { "x": 50.0, "y": 40.0 },
          { "x": 60.0, "y": 44.0 },
          { "x": 70.0, "y": 48.0 },
          { "x": 80.0, "y": 52.0 },
          { "x": 90.0, "y": 58.0 },
          { "x": 100.0, "y": 62.0 }
        ],
        "actions": [
          { "type": "set_time_visible_range", "start": 10.0, "end": 90.0 },
          { "type": "set_crosshair_mode", "mode": "magnet" },
          { "type": "pointer_move", "x": 420.0, "y": 190.0 }
        ]
      },
      "baseline_png_relpath": "tests/fixtures/lightweight_visual_differential/reference_png/lwc-style-line-basic.png",
      "tolerance": {
        "max_channel_abs_diff": 0,
        "mean_channel_abs_diff": 0.0
      }
    },
    {
      "id": "lwc-style-percentage-window",
      "description": "Percentage transformed price mode with explicit base and visible-window autoscale",
      "input": {
        "viewport": { "width": 900, "height": 420 },
        "time_range": [0.0, 100.0],
        "price_range": [80.0, 150.0],
        "points": [
          { "x": 0.0, "y": 100.0 },
          { "x": 10.0, "y": 102.0 },
          { "x": 20.0, "y": 106.0 },
          { "x": 30.0, "y": 109.0 },
          { "x": 40.0, "y": 112.0 },
          { "x": 50.0, "y": 108.0 },
          { "x": 60.0, "y": 116.0 },
          { "x": 70.0, "y": 121.0 },
          { "x": 80.0, "y": 118.0 },
          { "x": 90.0, "y": 124.0 },
          { "x": 100.0, "y": 128.0 }
        ],
        "actions": [
          { "type": "set_price_scale_mode", "mode": "percentage" },
          {
            "type": "set_transformed_base_behavior",
            "explicit_base_price": 100.0,
            "dynamic_source": "last_visible_data"
          },
          { "type": "set_time_visible_range", "start": 20.0, "end": 85.0 },
          { "type": "autoscale_visible_data" },
          { "type": "set_crosshair_mode", "mode": "magnet" },
          { "type": "pointer_move", "x": 610.0, "y": 210.0 }
        ]
      },
      "baseline_png_relpath": "tests/fixtures/lightweight_visual_differential/reference_png/lwc-style-percentage-window.png",
      "tolerance": {
        "max_channel_abs_diff": 0,
        "mean_channel_abs_diff": 0.0
      }
    },
    {
      "id": "lwc-style-candles-log-axis-scale-price",
      "description": "Candlestick render in log mode with price-axis drag scaling parity path",
      "input": {
        "viewport": { "width": 920, "height": 460 },
        "time_range": [0.0, 100.0],
        "price_range": [60.0, 320.0],
        "candles": [
          { "time": 0.0, "open": 70.0, "high": 86.0, "low": 64.0, "close": 82.0 },
          { "time": 10.0, "open": 82.0, "high": 95.0, "low": 75.0, "close": 90.0 },
          { "time": 20.0, "open": 90.0, "high": 108.0, "low": 84.0, "close": 101.0 },
          { "time": 30.0, "open": 101.0, "high": 122.0, "low": 95.0, "close": 115.0 },
          { "time": 40.0, "open": 115.0, "high": 136.0, "low": 108.0, "close": 128.0 },
          { "time": 50.0, "open": 128.0, "high": 156.0, "low": 121.0, "close": 145.0 },
          { "time": 60.0, "open": 145.0, "high": 178.0, "low": 138.0, "close": 168.0 },
          { "time": 70.0, "open": 168.0, "high": 206.0, "low": 160.0, "close": 194.0 },
          { "time": 80.0, "open": 194.0, "high": 238.0, "low": 185.0, "close": 225.0 },
          { "time": 90.0, "open": 225.0, "high": 272.0, "low": 214.0, "close": 258.0 },
          { "time": 100.0, "open": 258.0, "high": 306.0, "low": 246.0, "close": 292.0 }
        ],
        "actions": [
          { "type": "set_price_scale_mode", "mode": "log" },
          {
            "type": "axis_drag_scale_price",
            "drag_delta_y_px": 80.0,
            "anchor_y_px": 360.0,
            "zoom_step_ratio": 0.15,
            "min_span_absolute": 0.000001
          },
          {
            "type": "axis_drag_scale_price",
            "drag_delta_y_px": -80.0,
            "anchor_y_px": 360.0,
            "zoom_step_ratio": 0.15,
            "min_span_absolute": 0.000001
          },
          { "type": "set_crosshair_mode", "mode": "magnet" },
          { "type": "pointer_move", "x": 530.0, "y": 170.0 }
        ]
      },
      "baseline_png_relpath": "tests/fixtures/lightweight_visual_differential/reference_png/lwc-style-candles-log-axis-scale-price.png",
      "tolerance": {
        "max_channel_abs_diff": 0,
        "mean_channel_abs_diff": 0.0
      }
    },
    {
      "id": "lwc-style-timescale-session-timezone-axis-scale",
      "description": "TimeScale visual parity with timezone/session labels and time-axis drag scaling",
      "input": {
        "viewport": { "width": 960, "height": 460 },
        "time_range": [1704205800.0, 1704207600.0],
        "price_range": [10.0, 50.0],
        "points": [
          { "x": 1704205800.0, "y": 20.0 },
          { "x": 1704206100.0, "y": 22.0 },
          { "x": 1704206400.0, "y": 24.0 },
          { "x": 1704206700.0, "y": 28.0 },
          { "x": 1704207000.0, "y": 26.0 },
          { "x": 1704207300.0, "y": 30.0 },
          { "x": 1704207600.0, "y": 34.0 }
        ],
        "time_axis_label_config": {
          "locale": "EsEs",
          "policy": { "UtcDateTime": { "show_seconds": false } },
          "timezone": { "FixedOffsetMinutes": { "minutes": -300 } },
          "session": {
            "start_hour": 9,
            "start_minute": 30,
            "end_hour": 16,
            "end_minute": 0
          }
        },
        "actions": [
          { "type": "set_time_visible_range", "start": 1704205950.0, "end": 1704207450.0 },
          {
            "type": "axis_drag_scale_time",
            "drag_delta_x_px": 180.0,
            "anchor_x_px": 540.0,
            "zoom_step_ratio": 0.2,
            "min_span_absolute": 0.000001
          },
          {
            "type": "axis_drag_scale_time",
            "drag_delta_x_px": -300.0,
            "anchor_x_px": 540.0,
            "zoom_step_ratio": 0.2,
            "min_span_absolute": 0.000001
          },
          { "type": "set_crosshair_mode", "mode": "magnet" },
          { "type": "pointer_move", "x": 520.0, "y": 210.0 }
        ]
      },
      "baseline_png_relpath": "tests/fixtures/lightweight_visual_differential/reference_png/lwc-style-timescale-session-timezone-axis-scale.png",
      "tolerance": {
        "max_channel_abs_diff": 0,
        "mean_channel_abs_diff": 0.0
      }
    }
  ]
}
