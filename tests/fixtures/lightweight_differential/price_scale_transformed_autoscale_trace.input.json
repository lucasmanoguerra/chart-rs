{
  "trace_name": "price-scale-transformed-autoscale",
  "source": "lightweight-charts-v5.1",
  "source_notes": "Reference scenarios for transformed base behavior and visible autoscale flow.",
  "viewport": {
    "width": 1000,
    "height": 500
  },
  "time_range": {
    "start": 0.0,
    "end": 100.0
  },
  "price_range": {
    "min": 80.0,
    "max": 140.0
  },
  "tolerance": 0.000001,
  "scenarios": [
    {
      "id": "percentage-explicit-base-visible-autoscale",
      "probe_price": 130.0,
      "probe_pixel": 250.0,
      "points": [
        { "time": 0.0, "value": 100.0 },
        { "time": 10.0, "value": 110.0 },
        { "time": 20.0, "value": 120.0 },
        { "time": 30.0, "value": 130.0 },
        { "time": 40.0, "value": 140.0 }
      ],
      "steps": [
        { "action": { "type": "set_price_scale_mode", "mode": "percentage" } },
        {
          "action": {
            "type": "set_transformed_base_behavior",
            "explicit_base_price": 100.0,
            "dynamic_source": "last_visible_data"
          }
        },
        { "action": { "type": "set_time_visible_range", "start": 0.0, "end": 25.0 } },
        { "action": { "type": "autoscale_visible_data" } },
        { "action": { "type": "set_time_visible_range", "start": 20.0, "end": 40.0 } },
        { "action": { "type": "autoscale_visible_data" } }
      ]
    },
    {
      "id": "indexed-dynamic-last-visible-autoscale",
      "probe_price": 115.0,
      "probe_pixel": 260.0,
      "points": [
        { "time": 0.0, "value": 100.0 },
        { "time": 10.0, "value": 95.0 },
        { "time": 20.0, "value": 105.0 },
        { "time": 30.0, "value": 110.0 },
        { "time": 40.0, "value": 108.0 }
      ],
      "steps": [
        { "action": { "type": "set_price_scale_mode", "mode": "indexed_to100" } },
        {
          "action": {
            "type": "set_transformed_base_behavior",
            "explicit_base_price": null,
            "dynamic_source": "last_visible_data"
          }
        },
        { "action": { "type": "set_time_visible_range", "start": 0.0, "end": 15.0 } },
        { "action": { "type": "autoscale_visible_data" } },
        { "action": { "type": "append_point", "time": 50.0, "value": 150.0 } },
        { "action": { "type": "set_time_visible_range", "start": 35.0, "end": 60.0 } },
        { "action": { "type": "autoscale_visible_data" } }
      ]
    }
  ]
}
